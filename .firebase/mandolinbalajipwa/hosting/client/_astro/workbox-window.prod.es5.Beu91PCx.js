(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="02ecae14-457a-409b-a39f-33e3e131defa",e._sentryDebugIdIdentifier="sentry-dbid-02ecae14-457a-409b-a39f-33e3e131defa")}catch{}})();(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="9b066efe-5340-4fca-8dd5-2e42165258a7",e._sentryDebugIdIdentifier="sentry-dbid-9b066efe-5340-4fca-8dd5-2e42165258a7")}catch{}})();try{self["workbox:window:7.2.0"]&&_()}catch{}function P(e,r){return new Promise(function(n){var o=new MessageChannel;o.port1.onmessage=function(u){n(u.data)},e.postMessage(r,[o.port2])})}function k(e){var r=function(n,o){if(typeof n!="object"||!n)return n;var u=n[Symbol.toPrimitive];if(u!==void 0){var v=u.call(n,o);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e,"string");return typeof r=="symbol"?r:r+""}function I(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,k(o.key),o)}}function E(e,r){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},E(e,r)}function j(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}function W(e,r){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(u,v){if(u){if(typeof u=="string")return j(u,v);var l=Object.prototype.toString.call(u).slice(8,-1);return l==="Object"&&u.constructor&&(l=u.constructor.name),l==="Map"||l==="Set"?Array.from(u):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?j(u,v):void 0}}(e))||r){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}try{self["workbox:core:7.2.0"]&&_()}catch{}var w=function(){var e=this;this.promise=new Promise(function(r,n){e.resolve=r,e.reject=n})};function b(e,r){var n=location.href;return new URL(e,n).href===new URL(r,n).href}var p=function(e,r){this.type=e,Object.assign(this,r)};function h(e,r,n){return n?r?r(e):e:(e&&e.then||(e=Promise.resolve(e)),r?e.then(r):e)}function L(){}var O={type:"SKIP_WAITING"};function S(e,r){return e&&e.then?e.then(L):Promise.resolve()}var T=function(e){function r(d,c){var t,i;return c===void 0&&(c={}),(t=e.call(this)||this).nn={},t.tn=0,t.rn=new w,t.en=new w,t.on=new w,t.un=0,t.an=new Set,t.cn=function(){var s=t.fn,a=s.installing;t.tn>0||!b(a.scriptURL,t.sn.toString())||performance.now()>t.un+6e4?(t.vn=a,s.removeEventListener("updatefound",t.cn)):(t.hn=a,t.an.add(a),t.rn.resolve(a)),++t.tn,a.addEventListener("statechange",t.ln)},t.ln=function(s){var a=t.fn,f=s.target,g=f.state,y=f===t.vn,m={sw:f,isExternal:y,originalEvent:s};!y&&t.mn&&(m.isUpdate=!0),t.dispatchEvent(new p(g,m)),g==="installed"?t.wn=self.setTimeout(function(){g==="installed"&&a.waiting===f&&t.dispatchEvent(new p("waiting",m))},200):g==="activating"&&(clearTimeout(t.wn),y||t.en.resolve(f))},t.yn=function(s){var a=t.hn,f=a!==navigator.serviceWorker.controller;t.dispatchEvent(new p("controlling",{isExternal:f,originalEvent:s,sw:a,isUpdate:t.mn})),f||t.on.resolve(a)},t.gn=(i=function(s){var a=s.data,f=s.ports,g=s.source;return h(t.getSW(),function(){t.an.has(g)&&t.dispatchEvent(new p("message",{data:a,originalEvent:s,ports:f,sw:g}))})},function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];try{return Promise.resolve(i.apply(this,s))}catch(f){return Promise.reject(f)}}),t.sn=d,t.nn=c,navigator.serviceWorker.addEventListener("message",t.gn),t}var n,o;o=e,(n=r).prototype=Object.create(o.prototype),n.prototype.constructor=n,E(n,o);var u,v,l=r.prototype;return l.register=function(d){var c=(d===void 0?{}:d).immediate,t=c!==void 0&&c;try{var i=this;return h(function(s,a){var f=s();return f&&f.then?f.then(a):a(f)}(function(){if(!t&&document.readyState!=="complete")return S(new Promise(function(s){return window.addEventListener("load",s)}))},function(){return i.mn=!!navigator.serviceWorker.controller,i.dn=i.pn(),h(i.bn(),function(s){i.fn=s,i.dn&&(i.hn=i.dn,i.en.resolve(i.dn),i.on.resolve(i.dn),i.dn.addEventListener("statechange",i.ln,{once:!0}));var a=i.fn.waiting;return a&&b(a.scriptURL,i.sn.toString())&&(i.hn=a,Promise.resolve().then(function(){i.dispatchEvent(new p("waiting",{sw:a,wasWaitingBeforeRegister:!0}))}).then(function(){})),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.yn),i.fn})}))}catch(s){return Promise.reject(s)}},l.update=function(){try{return this.fn?h(S(this.fn.update())):h()}catch(d){return Promise.reject(d)}},l.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},l.messageSW=function(d){try{return h(this.getSW(),function(c){return P(c,d)})}catch(c){return Promise.reject(c)}},l.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&P(this.fn.waiting,O)},l.pn=function(){var d=navigator.serviceWorker.controller;return d&&b(d.scriptURL,this.sn.toString())?d:void 0},l.bn=function(){try{var d=this;return h(function(c,t){try{var i=c()}catch(s){return t(s)}return i&&i.then?i.then(void 0,t):i}(function(){return h(navigator.serviceWorker.register(d.sn,d.nn),function(c){return d.un=performance.now(),c})},function(c){throw c}))}catch(c){return Promise.reject(c)}},u=r,(v=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&I(u.prototype,v),Object.defineProperty(u,"prototype",{writable:!1}),u}(function(){function e(){this.Pn=new Map}var r=e.prototype;return r.addEventListener=function(n,o){this.jn(n).add(o)},r.removeEventListener=function(n,o){this.jn(n).delete(o)},r.dispatchEvent=function(n){n.target=this;for(var o,u=W(this.jn(n.type));!(o=u()).done;)(0,o.value)(n)},r.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e}());export{T as Workbox,p as WorkboxEvent,P as messageSW};
